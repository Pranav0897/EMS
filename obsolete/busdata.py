# Generated with SMOP  0.41-beta
from . import *
import numpy as np # from numpy import *
# busdata.m

    # Returns Bus data
    
#@function
class busdata:
    global num_buses,baseMVA,V_true,Phi_true
    def __init__(self):
        self.num_buses=1
        self.baseMVA=0
        self.V_true=np.empty(shape=(1,self.num_buses))
        self.Phi_true=np.empty(shape=(1,self.num_buses))
        self.busdatas=np.empty(shape=(12,self.num_buses)) 

    def set_bus_data(self,n_bus=4):

        self.num_buses=n_bus
        if n_bus is 4:
            '''Simple 4 bus system example
            '''
            self.baseMVA=1
            # |Bus | Type | Vsp*|theta | PGi | QGi | PLi | QLi | Qmin | Qmax | Gs | Bs |
            self.busdatas=[[1,1,1.0,0,1.9963,0.44939,0,0,0,0,0,0],
                [2,3,1.0,0,0,0,0.49944,0.30229,0,0,0,0],
                [3,3,1.0,0,0,0,1.2006,0.79897,0,0,0,0.5],
                [4,3,1.0,0,0,0,0.25057,0.09907,0,0,0,0]]
            

            self.V_true=np.concat([1,0.9629,0.9597,0.9742]).T
            self.Phi_true=np.concat([0,- 2.76,- 3.58,- 3.96]).T

        
        elif n_bus is 6:
            ''' 6 bus example from pp. 104, 112, 119, 123-124, 549 of "Power Generation, Operation,and Control, 2nd Edition",
                by Allen. J. Wood and Bruce F. Wollenberg, John Wiley & Sons, NY, Jan 1996.
            '''
            self.baseMVA=100
            # |Bus | Type | Vsp*|theta | PGi | QGi | PLi | QLi | Qmin | Qmax | Gs | Bs |
            self.busdatas=[[1,1,1.05,0,107.9,16,0,0,0,0,0,0],
                [2,2,1.05,0,50,74.4,0,0,0,0,0,0],
                [3,2,1.07,0,60,89.6,0,0,0,0,0,0],
                [4,3,1.0,0,0,0,70,70,0,0,0,0],
                [5,3,1.0,0,0,0,70,70,0,0,0,0],
                [6,3,1.0,0,0,0,70,70,0,0,0,0]]
            
            self.V_true=np.concat([241.5,241.5,246.1,227.6,226.7,231]).T / 230
            self.Phi_true=np.concat([0,- 3.7,- 4.3,- 4.2,- 5.3,- 5.9]).T
            
            
            elif n_bus is 14:
                '''IEEE 14 bus system
                '''
                baseMVA=100
                self.busdatas=[[1,1,1.06,0,232.4,- 16.9,0,0,0,0,0,0],
                    [2,2,1.045,0,40,42.4,21.7,12.7,- 40,50,0,0],
                    [3,2,1.01,0,0,23.4,94.2,19.0,0,40,0,0],
                    [4,3,1.0,0,0,0,47.8,- 3.9,0,0,0,0],
                    [5,3,1.0,0,0,0,7.6,1.6,0,0,0,0],
                    [6,2,1.07,0,0,12.2,11.2,7.5,- 6,24,0,0],
                    [7,3,1.0,0,0,0,0.0,0.0,0,0,0,0],
                    [8,2,1.09,0,0,17.4,0.0,0.0,- 6,24,0,0],
                    [9,3,1.0,0,0,0,29.5,16.6,0,0,0,19],
                    [10,3,1.0,0,0,0,9.0,5.8,0,0,0,0],
                    [11,3,1.0,0,0,0,3.5,1.8,0,0,0,0],
                    [12,3,1.0,0,0,0,6.1,1.6,0,0,0,0],
                    [13,3,1.0,0,0,0,13.5,5.8,0,0,0,0],
                    [14,3,1.0,0,0,0,14.9,5.0,0,0,0,0]]
                self.V_true=np.concat([1.06,1.045,1.01,1.019,1.02,1.07,1.062,1.09,1.056,1.051,1.057,1.055,1.05,1.036]).T
                self.Phi_true=np.concat([0,- 4.98,- 12.72,- 10.33,- 8.78,- 14.22,- 13.37,- 13.36,- 14.94,- 15.1,- 14.79,- 15.07,- 15.16,- 16.04]).T
            
            elif n_bus is 30:
                '''IEEE 30 bus system
                '''
                # |Bus | Type | Vsp*|theta | PGi | QGi | PLi | QLi | Qmin | Qmax | Gs | Bs |
                baseMVA=100
                busdatas=[[1,1,1.06,0,260.2,- 16.1,0,0,0,0,0,0],
                [2,2,1.045,0,40,50,21.7,12.7,- 40,50,0,0],
                [3,3,1.0,0,0,0,2.4,1.2,0,0,0,0],
                [4,3,1.0,0,0,0,7.6,1.6,0,0,0,0],
                [5,2,1.01,0,0,37.0,94.2,19.0,- 40,40,0,0],
                [6,3,1.0,0,0,0,0,0,0,0,0,0],
                [7,3,1.0,0,0,0,22.8,10.9,0,0,0,0],
                [8,2,1.01,0,0,37.3,30,30,- 10,40,0,0],
                [9,3,1.0,0,0,0,0,0,0,0,0,0],
                [10,3,1.0,0,0,0,5.8,2.0,0,0,0,19],
                [11,2,1.082,0,0,16.2,0,0,- 6.0,24,0,0],
                [12,3,1.0,0,0,0,11.2,7.5,0,0,0,0],
                [13,2,1.071,0,0,10.6,0,0,- 6.0,24,0,0],
                [14,3,1.0,0,0,0,6.2,1.6,0,0,0,0],
                [15,3,1.0,0,0,0,8.2,2.5,0,0,0,0],
                [16,3,1.0,0,0,0,3.5,1.8,0,0,0,0],
                [17,3,1.0,0,0,0,9.0,5.8,0,0,0,0],
                [18,3,1.0,0,0,0,3.2,0.9,0,0,0,0],
                [19,3,1.0,0,0,0,9.5,3.4,0,0,0,0],
                [20,3,1.0,0,0,0,2.2,0.7,0,0,0,0],
                [21,3,1.0,0,0,0,17.5,11.2,0,0,0,0],
                [22,3,1.0,0,0,0,0,0,0,0,0,0],
                [23,3,1.0,0,0,0,3.2,1.6,0,0,0,0],
                [24,3,1.0,0,0,0,8.7,6.7,0,0,0,4.3],
                [25,3,1.0,0,0,0,0,0,0,0,0,0],
                [26,3,1.0,0,0,0,3.5,2.3,0,0,0,0],
                [27,3,1.0,0,0,0,0,0,0,0,0,0],
                [28,3,1.0,0,0,0,0,0,0,0,0,0],
                [29,3,1.0,0,0,0,2.4,0.9,0,0,0,0],
                [30,3,1.0,0,0,0,10.6,1.9,0,0,0,0]]
                
